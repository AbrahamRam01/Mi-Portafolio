{% include 'admin/header.html' %}

<script>
    function menu(operacion) {
        if (operacion === 1) {
            document.getElementById("ventas").hidden = false;
            document.getElementById("productos").hidden = true;
            document.getElementById("proveedores").hidden = true;
            document.getElementById("impuestos").hidden = true;
            document.getElementById("usuarios").hidden = true;

            var casillas = document.querySelectorAll(".casilla");
            for (var x = 0; x < casillas.length; x++) {
                casillas[x].style.cssText = "border-bottom: none"
            }
            casillas[0].style.cssText = "border-bottom: #f04f4f 5px solid"

        } else if (operacion === 2) {
            document.getElementById("ventas").hidden = true;
            document.getElementById("productos").hidden = false;
            document.getElementById("proveedores").hidden = true;
            document.getElementById("impuestos").hidden = true;
            document.getElementById("usuarios").hidden = true;

            var casillas = document.querySelectorAll(".casilla");
            for (var x = 0; x < casillas.length; x++) {
                casillas[x].style.cssText = "border-bottom: none"
            }
            casillas[1].style.cssText = "border-bottom: #f04f4f 5px solid"

        } else if (operacion === 3) {
            document.getElementById("ventas").hidden = true;
            document.getElementById("productos").hidden = true;
            document.getElementById("proveedores").hidden = false;
            document.getElementById("impuestos").hidden = true;
            document.getElementById("usuarios").hidden = true;

            var casillas = document.querySelectorAll(".casilla");
            for (var x = 0; x < casillas.length; x++) {
                casillas[x].style.cssText = "border-bottom: none"
            }
            casillas[2].style.cssText = "border-bottom: #f04f4f 5px solid"
        } else if (operacion === 4) {
            document.getElementById("ventas").hidden = true;
            document.getElementById("productos").hidden = true;
            document.getElementById("proveedores").hidden = true;
            document.getElementById("impuestos").hidden = false;
            document.getElementById("usuarios").hidden = true;

            var casillas = document.querySelectorAll(".casilla");
            for (var x = 0; x < casillas.length; x++) {
                casillas[x].style.cssText = "border-bottom: none"
            }
            casillas[3].style.cssText = "border-bottom: #f04f4f 5px solid"
        } else if (operacion === 5) {
            document.getElementById("ventas").hidden = true;
            document.getElementById("productos").hidden = true;
            document.getElementById("proveedores").hidden = true;
            document.getElementById("impuestos").hidden = true;
            document.getElementById("usuarios").hidden = false;

            var casillas = document.querySelectorAll(".casilla");
            for (var x = 0; x < casillas.length; x++) {
                casillas[x].style.cssText = "border-bottom: none"
            }
            casillas[4].style.cssText = "border-bottom: #f04f4f 5px solid"
        }
    }

    function editarPerfil(op) {
        if (op === 1) {
            document.getElementById("editPerfil").hidden = false;
            document.getElementById("infoPerfil").hidden = true;
        } else if (op === 2) {
            document.getElementById("editPerfil").hidden = true;
            document.getElementById("infoPerfil").hidden = false;
        }
    }

    var totalVenta = 0.00;
    var totalArticulos = 0;
    let seleccionArticulos = [];

    function Articulo(codigo, nombre, cantidad, precio) {
        this.codigo = codigo;
        this.nombre = nombre;
        this.cantidad = cantidad;
        this.precio = precio;
    }

    function checkbox(op) {
        if (seleccionArticulos.length === 0) {
            document.getElementById("articuloSeleccion").innerHTML = ""
        }

        var existe = seleccionArticulos.filter((articulo) => articulo.codigo == document.getElementById("codigo" + op).innerHTML);

        if (existe.length == 1) {
            var posicion;
            var cantidadNueva;

            var stock = document.getElementById("stock" + op).innerHTML;

            var codigo = document.getElementById("codigo" + op).innerHTML;
            var nombre = document.getElementById("nombre" + op).innerHTML;
            var precio = document.getElementById("total" + op).innerHTML;

            for (var i = 0; i < seleccionArticulos.length; i++) {
                if (seleccionArticulos[i].codigo === document.getElementById("codigo" + op).innerHTML) {
                    posicion = i;
                    cantidad = seleccionArticulos[i].cantidad;
                }
            }

            cantidad++;
            if (cantidad <= parseFloat(stock)) {
                seleccionArticulos.splice(posicion, 1, new Articulo(codigo, nombre, cantidad, precio));

                totalVenta = parseFloat(totalVenta) + parseFloat(precio);
                totalArticulos++;
            } else {
                alert("¡No hay más stock para este producto!");
            }

        } else {
            var codigo = document.getElementById("codigo" + op).innerHTML;
            var nombre = document.getElementById("nombre" + op).innerHTML;
            var cantidad = 1;
            var precio = document.getElementById("total" + op).innerHTML;
            seleccionArticulos.push(new Articulo(codigo, nombre, cantidad, precio));
            totalVenta = parseFloat(totalVenta) + parseFloat(precio);
            totalArticulos++;
            document.getElementById("articuloVenta" + op).style.background = 'rgb(197, 197, 197)';
            document.getElementById("botonVenta").hidden = false;
        }

        imprimirArticulos();
    }

    function checkboxRestar(op) {

        var existe = seleccionArticulos.filter((articulo) => articulo.codigo == document.getElementById("codigo" + op).innerHTML);

        if (existe.length == 1) {
            var posicion;
            var cantidadNueva;
            var codigo = document.getElementById("codigo" + op).innerHTML;
            var nombre = document.getElementById("nombre" + op).innerHTML;
            var precio = document.getElementById("total" + op).innerHTML;

            for (var i = 0; i < seleccionArticulos.length; i++) {
                if (seleccionArticulos[i].codigo === document.getElementById("codigo" + op).innerHTML) {
                    posicion = i;
                    cantidad = seleccionArticulos[i].cantidad;
                }
            }

            cantidad--;

            if (cantidad === 0) {
                seleccionArticulos.splice(posicion, 1);
                document.getElementById("articuloVenta" + op).style.background = 'white';
            } else {
                seleccionArticulos.splice(posicion, 1, new Articulo(codigo, nombre, cantidad, precio));
            }

            totalVenta = parseFloat(totalVenta) - parseFloat(precio);
            totalArticulos--;

        }

        imprimirArticulos();

        if (seleccionArticulos.length === 0) {
            document.getElementById("articuloSeleccion").innerHTML = "<tr><td colspan='5'><div class='alert alert-primary' role='alert' style='text-align: center;'><strong>No hay articulos seleccionados</strong></div></td></tr>";
            document.getElementById("botonVenta").hidden = true;
        }
    }

    function imprimirArticulos() {
        document.getElementById("articuloSeleccion").innerHTML = "";

        for (var i = 0; i < seleccionArticulos.length; i++) {
            document.getElementById("articuloSeleccion").innerHTML = document.getElementById("articuloSeleccion").innerHTML +
                "<tr><td style='text-align: center;'>" + seleccionArticulos[i].codigo + "</td><td>" + seleccionArticulos[i].nombre + "</td><td>" + seleccionArticulos[i].cantidad +
                "</td><td>" + seleccionArticulos[i].precio + "</td></tr>";
        }

        document.getElementById("totalArticulos").innerHTML = totalArticulos;
        document.getElementById("totalVenta").innerHTML = "$" + totalVenta;
    }

    function enviarJSON() {
        // Configuración de la solicitud
        var url = "{{url_for('agregarVenta')}}";
        var options = {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
                // Puedes agregar más encabezados si es necesario
            },
            body: JSON.stringify(seleccionArticulos)
        };

        // Realizar la solicitud utilizando fetch
        fetch(url, options)
            .then(response => response.json())
            .then(data => {
                // Manejar la respuesta del servidor (si es necesario)
                console.log(data);
                location.reload();
            })
            .catch(error1 => {
                // Manejar errores de la solicitud
                alert('Error al enviar la solicitud: ', error);
            });
    }

    function detalleArticulo(op, id) {
        if (op === 1) {
            document.getElementById("detalleArtTabla" + id).hidden = false;
            document.getElementById("cerrarDetalle" + id).hidden = false;
            document.getElementById("abrirDetalle" + id).hidden = true;
        } else if (op === 2) {
            document.getElementById("detalleArtTabla" + id).hidden = true;
            document.getElementById("cerrarDetalle" + id).hidden = true;
            document.getElementById("abrirDetalle" + id).hidden = false;
        }
    }

    let entrada = [];
    let salida = [];
    function operacionAlmacen(codigo, cantidad, tipoOperacion) {
        this.codigo = codigo;
        this.cantidad = cantidad;
        this.tipoOperacion = tipoOperacion;
    }

    function seleccionarEntAlm(idPro) {
        var elementos = document.getElementsByClassName("articulosEntrada");

        if (entrada.length == 0) {
            for (var i = 0; i < elementos.length; i++) {
                elementos[i].hidden = true;
            }

            var columna = document.getElementsByClassName("accionColumna");

            for (var i = 0; i < columna.length; i++) {
                columna[i].hidden = true;
            }

            document.getElementById("articuloEntrada" + idPro).hidden = false;
            document.getElementById("cancelarEntrada").hidden = false;
            document.getElementById("cantidadEntrada").hidden = false;

            entrada.push(new operacionAlmacen(idPro, 0, 1));
            console.log(entrada);
        }

    }

    function seleccionarSalAlm(idPro) {
        var elementos = document.getElementsByClassName("articulosSalida");

        if (entrada.length == 0) {
            for (var i = 0; i < elementos.length; i++) {
                elementos[i].hidden = true;
            }

            var columna = document.getElementsByClassName("accionColumnaSalida");

            for (var i = 0; i < columna.length; i++) {
                columna[i].hidden = true;
            }

            document.getElementById("articuloSalida" + idPro).hidden = false;
            document.getElementById("cancelarSalida").hidden = false;
            document.getElementById("cantidadSalida").hidden = false;

            salida.push(new operacionAlmacen(idPro, 0, 2));
            console.log(salida);
        }

    }

    function cancelarEntrada() {
        var elementos = document.getElementsByClassName("articulosEntrada");

        for (var i = 0; i < elementos.length; i++) {
            elementos[i].hidden = false;
        }

        var columna = document.getElementsByClassName("accionColumna");

        for (var i = 0; i < columna.length; i++) {
            columna[i].hidden = false;
        }

        document.getElementById("cancelarEntrada").hidden = true;
        document.getElementById("cantidadEntrada").hidden = true;
        entrada.pop();
        console.log(entrada);
    }

    function cancelarSalida() {
        var elementos = document.getElementsByClassName("articulosSalida");

        for (var i = 0; i < elementos.length; i++) {
            elementos[i].hidden = false;
        }

        var columna = document.getElementsByClassName("accionColumnaSalida");

        for (var i = 0; i < columna.length; i++) {
            columna[i].hidden = false;
        }

        document.getElementById("cancelarSalida").hidden = true;
        document.getElementById("cantidadSalida").hidden = true;
        salida.pop();
        console.log(salida);
    }

    function enviarEntrada() {

        var cantidad = document.getElementById("cantidadFinal").value;
        var codigo = entrada[0].codigo;
        entrada.pop();
        entrada.push(new operacionAlmacen(codigo, cantidad, 1));

        // Configuración de la solicitud
        var url = "{{url_for('operacionAlmacen')}}";
        var options = {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
                // Puedes agregar más encabezados si es necesario
            },
            body: JSON.stringify(entrada)
        };

        // Realizar la solicitud utilizando fetch
        fetch(url, options)
            .then(response => response.json())
            .then(data => {
                // Manejar la respuesta del servidor (si es necesario)
                console.log(data);
                location.reload();
            })
            .catch(error1 => {
                // Manejar errores de la solicitud
                alert('Error al enviar la solicitud: ', error);
            });
    }

    function enviarSalida() {

        var cantidad = document.getElementById("cantidadFinalSalida").value;
        var codigo = salida[0].codigo;
        salida.pop();
        salida.push(new operacionAlmacen(codigo, cantidad, 2));

        // Configuración de la solicitud
        var url = "{{url_for('operacionAlmacen')}}";
        var options = {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
                // Puedes agregar más encabezados si es necesario
            },
            body: JSON.stringify(salida)
        };

        // Realizar la solicitud utilizando fetch
        fetch(url, options)
            .then(response => response.json())
            .then(data => {
                // Manejar la respuesta del servidor (si es necesario)
                console.log(data);
                location.reload();
            })
            .catch(error1 => {
                // Manejar errores de la solicitud
                alert('Error al enviar la solicitud: ', error);
            });
    }

</script>

<!-- Modal Alta Usuario -->
<div class="modal fade" id="modalAltaUsuario" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Alta de usuario</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{{url_for('agregarUsuario')}}">
                    <table style="width: 95%; margin: auto; vertical-align: middle; padding: 0.5rem;"
                        cellspacing="1rem">
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Tipo de usuario</label>
                                <select class="form-select" name="tipoUsuario" id="">
                                    {% for tipU in tipoUsuario %}
                                    <option value="{{tipU[0]}}">{{tipU[1]}}</option>
                                    {% endfor %}
                                </select>
                                <small id="helpId" class="form-text text-muted">Tipo de usuario</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Nombre de Usuario</label>
                                <input type="text" class="form-control" name="user" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el nombre de usuario</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Contraseña</label>
                                <input type="text" class="form-control" name="contra" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe la contraseña del
                                    usuario</small>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Nombre(s)</label>
                                <input type="text" class="form-control" name="nombre" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el o los nombres del
                                    usuario</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Apellido Paterno</label>
                                <input type="text" class="form-control" name="apellidoP" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el apellido paterno del
                                    usuario</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Apellido Materno</label>
                                <input type="text" class="form-control" name="apellidoM" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el apellido materno del
                                    usuario</small>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Telefono</label>
                                <input type="text" class="form-control" name="telefono" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el telefono del usuario</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Correo Electronico</label>
                                <input type="text" class="form-control" name="correo" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el correo electronico del
                                    usuario</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Dirección</label>
                                <input type="text" class="form-control" name="direccion" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe la dirección del usuario</small>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="width: 33%;">
                                <label for="" class="form-label">Fecha de nacimiento</label>
                                <input type="date" class="form-control" name="fechaNacimiento" id=""
                                    aria-describedby="helpId" placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe la fecha de nacimiento del
                                    usuario</small>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="width: 33%; text-align: right;">
                                <button type="submit" class="btn btn-primary">
                                    Guardar
                                </button>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Alta Producto -->
<div class="modal fade" id="modalAltaProducto" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Alta de producto</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{{url_for('agregarProducto')}}">
                    <table style="width: 95%; margin: auto; vertical-align: middle; padding: 0.5rem;"
                        cellspacing="1rem">
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Tipo de producto</label>
                                <select class="form-select" name="tipoProducto" id="">
                                    {% for tipP in tipoProducto %}
                                    <option value="{{tipP[0]}}">{{tipP[1]}}</option>
                                    {% endfor %}
                                </select>
                                <small id="helpId" class="form-text text-muted">Selecciona el tipo de producto</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Proveedor</label>
                                <select class="form-select" name="proveedor" id="">
                                    {% for prov in proveedor %}
                                    <option value="{{prov[0]}}">{{prov[1]}}</option>
                                    {% endfor %}
                                </select>
                                <small id="helpId" class="form-text text-muted">Selecciona el proveedor</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Tipo de Impuesto</label>
                                <select class="form-select" name="impuesto" id="">
                                    {% for imp in impuestos %}
                                    <option value="{{imp[0]}}">{{imp[1]}} / {{imp[2]}}%</option>
                                    {% endfor %}
                                </select>
                                <small id="helpId" class="form-text text-muted">Selecciona el tipo de impuesto</small>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Nombre</label>
                                <input type="text" class="form-control" name="nombre" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el nombre del producto</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Costo</label>
                                <input type="number" class="form-control" min="0" max="999999" name="costo" id=""
                                    aria-describedby="helpId" placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el costo del producto</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Precio de Venta</label>
                                <input type="number" class="form-control" min="0" max="999999" name="precioV" id=""
                                    aria-describedby="helpId" placeholder="" />
                                <small id="helpId" class="form-text text-muted">Escribe el precio de venta del
                                    producto</small>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Unidad de medida</label>
                                <select class="form-select" name="unidad" id="">
                                    <option value="Unidad">Unidad</option>
                                    <option value="Pieza">Pieza</option>
                                    <option value="Juego">Juego</option>
                                    <option value="Kilogramo">Kilogramo</option>
                                    <option value="Botella">Botella</option>
                                    <option value="Par">Par</option>
                                    <option value="Lata">Lata</option>
                                    <option value="Frasco">Frasco</option>
                                </select>
                                <small id="helpId" class="form-text text-muted">Escribe la unidad de medida</small>
                            </td>
                            <td style="width: 33%;" colspan="2">
                                <label for="" class="form-label">Stock Inicial</label>
                                <input type="number" class="form-control" min="0" max="999999" name="stock" id=""
                                    aria-describedby="helpId" placeholder="" />
                                <small id="helpId" class="form-text text-muted">Ingresa el stock inicial del
                                    producto</small>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="width: 33%; text-align: right;">
                                <button type="submit" class="btn btn-primary">
                                    Guardar
                                </button>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Alta Impuesto -->
<div class="modal fade" id="modalAltaImpuesto" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Alta de impuesto</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{{url_for('agregarImpuesto')}}">
                    <table style="width: 95%; margin: auto; vertical-align: middle; padding: 0.5rem;"
                        cellspacing="1rem">
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Nombre</label>
                                <input type="text" class="form-control" name="nombre" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Nombre del impuesto</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Porcentaje</label>
                                <input type="number" class="form-control" min="0" max="99" name="porcentaje" id=""
                                    aria-describedby="helpId" placeholder="" />
                                <small id="helpId" class="form-text text-muted">Porcentaje del impuesto</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Tipo de Impuesto</label>
                                <select class="form-select" name="tipoImpuesto" id="">
                                    <option value="Retención">Retención</option>
                                    <option value="Agregado">Agregado</option>
                                </select>
                                <small id="helpId" class="form-text text-muted">Selecciona el tipo de impuesto</small>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="width: 33%; text-align: right;">
                                <button type="submit" class="btn btn-primary">
                                    Guardar
                                </button>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Alta proveedor -->
<div class="modal fade" id="modalAltaProveedor" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Alta de proveedor</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{{url_for('agregarProveedor')}}">
                    <table style="width: 95%; margin: auto; vertical-align: middle; padding: 0.5rem;"
                        cellspacing="1rem">
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Razón Social</label>
                                <input type="text" class="form-control" name="nombre" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Nombre del proveedor</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">RFC</label>
                                <input type="text" class="form-control" name="rfc" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">RFC del proveedor</small>
                            </td>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Telefono</label>
                                <input type="text" class="form-control" name="telefono" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Telefono de contacto</small>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 33%;">
                                <label for="" class="form-label">Correo electronico</label>
                                <input type="text" class="form-control" name="correo" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Correo electronico del proveedor</small>
                            </td>
                            <td colspan="2" style="width: 33%;">
                                <label for="" class="form-label">Dirección</label>
                                <input type="text" class="form-control" name="direccion" id="" aria-describedby="helpId"
                                    placeholder="" />
                                <small id="helpId" class="form-text text-muted">Dirección del proveedor</small>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="width: 33%; text-align: right;">
                                <button type="submit" class="btn btn-primary">
                                    Guardar
                                </button>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Almacen Entrada -->
<div class="modal fade" id="modalAlmEntrada" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Entrada de mercancia</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <label style="font-size: larger;">Lista de articulos</label>
                <hr>
                <div style="width: 90%; margin: auto;">
                    <input type="text" class="form-control" name="bsucador" id="buscador" aria-describedby="helpId"
                        placeholder="Escribe el codigo o nombre del producto..." />
                </div>
                <hr>
                <div id="seleccionEntrada" class="table-responsive" style="max-height: 17rem; height: auto;">
                    <table class="table" style="vertical-align: middle; width: 98%;">
                        <thead>
                            <tr>
                                <th scope="col" style="text-align: center; width: 5%;">Codigo</th>
                                <th scope="col" style="width: 40%;">Producto</th>
                                <th scope="col" style="width: 40%;">Stock</th>
                                <th scope="col" class="accionColumna" style="text-align: center; width: 15%;">Acciónes
                                </th>
                            </tr>
                        </thead>
                        <tbody id="listaArticulos">
                            {% for pro in productos %}
                            <tr id="articuloEntrada{{pro[0]}}" class="articulosEntrada">
                                <td style="text-align: center;" id="codigoEntrada{{pro[0]}}">{{pro[0]}}</td>
                                <td id="nombreEntrada{{pro[0]}}">{{pro[4]}}</td>
                                <td><label id="stockEntrada{{pro[0]}}">{{pro[8]}}</label>&nbsp;{{pro[7]}}</td>
                                <td class="accionColumna" style="text-align: center;">
                                    <button type="button" onclick="seleccionarEntAlm('{{pro[0]}}')"
                                        class="btn btn-success">
                                        Seleccionar
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div id="cantidadEntrada" hidden="true">
                    <label style="font-size: larger;">Entrada</label>
                    <hr>
                    <input id="cantidadFinal" type="number" class="form-control" name="" id="" min="0" step="1"
                        max="9999" aria-describedby="helpId" placeholder="Escribe la cantidad" />
                    <small id="helpId" class="form-text text-muted">Escribe la cantidad para entrada de
                        mercancia.</small>
                    <div style="width: 100%; text-align: center;">
                        <button hidden="true" id="cancelarEntrada" onclick="cancelarEntrada()" type="button"
                            class="btn btn-danger">
                            Cancelar
                        </button>
                        <button type="button" class="btn btn-primary" onclick="enviarEntrada()">
                            Aceptar
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Almacen Salida -->
<div class="modal fade" id="modalAlmSalida" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Salida de mercancia</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <label style="font-size: larger;">Lista de articulos</label>
                <hr>
                <div style="width: 90%; margin: auto;">
                    <input type="text" class="form-control" name="bsucador" id="buscador" aria-describedby="helpId"
                        placeholder="Escribe el codigo o nombre del producto..." />
                </div>
                <hr>
                <div id="seleccionSalida" class="table-responsive" style="max-height: 17rem; height: auto;">
                    <table class="table" style="vertical-align: middle; width: 98%;">
                        <thead>
                            <tr>
                                <th scope="col" style="text-align: center; width: 5%;">Codigo</th>
                                <th scope="col" style="width: 40%;">Producto</th>
                                <th scope="col" style="width: 40%;">Stock</th>
                                <th scope="col" class="accionColumnaSalida" style="text-align: center; width: 15%;">
                                    Acciónes
                                </th>
                            </tr>
                        </thead>
                        <tbody id="listaArticulos">
                            {% for pro in productos %}
                            <tr id="articuloSalida{{pro[0]}}" class="articulosSalida">
                                <td style="text-align: center;" id="codigoSalida{{pro[0]}}">{{pro[0]}}</td>
                                <td id="nombreSalida{{pro[0]}}">{{pro[4]}}</td>
                                <td><label id="stockSalida{{pro[0]}}">{{pro[8]}}</label>&nbsp;{{pro[7]}}</td>
                                <td class="accionColumnaSalida" style="text-align: center;">
                                    <button type="button" onclick="seleccionarSalAlm('{{pro[0]}}')"
                                        class="btn btn-success">
                                        Seleccionar
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div id="cantidadSalida" hidden="true">
                    <label style="font-size: larger;">Salida</label>
                    <hr>
                    <input id="cantidadFinalSalida" type="number" class="form-control" name="" id="" min="0" step="1"
                        max="9999" aria-describedby="helpId" placeholder="Escribe la cantidad" />
                    <small id="helpId" class="form-text text-muted">Escribe la cantidad para salida de
                        mercancia.</small>
                    <div style="width: 100%; text-align: center;">
                        <button hidden="true" id="cancelarSalida" onclick="cancelarSalida()" type="button"
                            class="btn btn-danger">
                            Cancelar
                        </button>
                        <button type="button" class="btn btn-primary" onclick="enviarSalida()">
                            Aceptar
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Perfil -->
<div class="modal fade" id="modalPerfil" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Perfil</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table id="infoPerfil" style="width: 90%; margin: auto; vertical-align: middle;">
                    <tr>
                        <td colspan="3">
                            <h3>Información de perfil</h3>
                            <hr>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="5" style="text-align: center;">
                            <img src='/img/user.png' width="150rem" height="150rem">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <small>Nombre</small>
                            <h5>{{user[0][4]}}&nbsp;{{user[0][5]}}&nbsp;{{user[0][6]}}</h5>
                            <hr>
                        </td>
                        <td colspan="2">
                            <small>Fecha de Nacimiento</small>
                            <h5>{{user[0][10]}}</h5>
                            <hr>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <small>Nombre de usuario</small>
                            <h5>{{user[0][2]}}</h5>
                            <hr>
                        </td>
                        <td colspan="2">
                            <small>Telefono</small>
                            <h5>{{user[0][7]}}</h5>
                            <hr>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <small>Contraseña</small>
                            <h5>{{user[0][3]}}</h5>
                            <hr>
                        </td>
                        <td colspan="2">
                            <small>Dirección</small>
                            <h5>{{user[0][9]}}</h5>
                            <hr>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <small>Correo</small>
                            <h5>{{user[0][8]}}</h5>
                            <hr>
                        </td>
                    </tr>
                </table>
                <form hidden="true" method="POST" id="editPerfil" action="{{url_for('editarPerfil')}}">
                    <table style="width: 90%; margin: auto; vertical-align: middle;">
                        <tr>
                            <td>
                                <label for="" class="form-label">Nombre</label>
                                <input type="text" class="form-control" name="nombre" id="" aria-describedby="helpId"
                                    value="{{user[0][4]}}" placeholder="{{user[0][4]}}" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Apellido Paterno</label>
                                <input type="text" class="form-control" name="apellidoP" id="" aria-describedby="helpId"
                                    value="{{user[0][5]}}" placeholder="{{user[0][5]}}" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Apeliido Materno</label>
                                <input type="text" class="form-control" name="apellidoM" id="" aria-describedby="helpId"
                                    value="{{user[0][6]}}" placeholder="{{user[0][6]}}" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Fecha de Nacimiento</label>
                                <input type="text" class="form-control" name="fecNac" id="" aria-describedby="helpId"
                                    value="{{user[0][10]}}" placeholder="{{user[0][10]}}" />
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Nombre de usuario</label>
                                <input type="text" class="form-control" name="nombreUsuario" id=""
                                    aria-describedby="helpId" value="{{user[0][2]}}" placeholder="{{user[0][2]}}" />
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Telefono</label>
                                <input type="text" class="form-control" name="telefono" id="" aria-describedby="helpId"
                                    value="{{user[0][7]}}" placeholder="{{user[0][7]}}" />
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Contraseña</label>
                                <input type="text" class="form-control" name="contra" id="" aria-describedby="helpId"
                                    value="{{user[0][3]}}" placeholder="{{user[0][3]}}" />
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Dirección</label>
                                <input type="text" class="form-control" name="direccion" id="" aria-describedby="helpId"
                                    value="{{user[0][9]}}" placeholder="{{user[0][9]}}" />
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="" class="form-label">Correo</label>
                                <input type="text" class="form-control" name="correo" id="" aria-describedby="helpId"
                                    value="{{user[0][8]}}" placeholder="{{user[0][8]}}" />
                                <hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <a onclick="editarPerfil(2)" class="btn btn-secondary">Cerrar</a>
                                <button type="submit" class="btn btn-primary"> Guardar </button>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button id="editarPerfil" type="button" class="btn btn-success"
                    onclick="editarPerfil(1)">Editar</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Venta -->
<div class="modal fade" id="modalVenta" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Crear venta</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-8">
                        <label style="font-size: larger;">Lista de articulos</label>
                        <hr>
                        <div style="width: 90%; margin: auto;">
                            <input type="text" class="form-control" name="bsucador" id="buscador"
                                aria-describedby="helpId" placeholder="Escribe el codigo o nombre del producto..." />
                        </div>
                        <hr>
                        <div class="table-responsive" style="height: 17rem;">
                            <table class="table" style="vertical-align: middle; width: 98%;">
                                <thead>
                                    <tr>
                                        <th scope="col" style="text-align: center; width: 5%;">Codigo</th>
                                        <th scope="col" style="width: 25%;">Producto</th>
                                        <th scope="col" style="width: 10%;">Stock</th>
                                        <th scope="col" style="width: 15%;">Precio</th>
                                        <th scope="col" style="text-align: center; width: 20%;">Acciónes</th>
                                    </tr>
                                </thead>
                                <tbody id="listaArticulos">
                                    {% for pro in productos %}
                                    <tr id="articuloVenta{{pro[0]}}" class="articulo">
                                        <td style="text-align: center;" id="codigo{{pro[0]}}">{{pro[0]}}</td>
                                        <td id="nombre{{pro[0]}}">{{pro[4]}}</td>
                                        <td><label id="stock{{pro[0]}}">{{pro[8]}}</label>&nbsp;{{pro[7]}}</td>
                                        <td id="total{{pro[0]}}">{{pro[6]}}</td>
                                        <td style="text-align: center;">
                                            {% if pro[8] != 0 %}
                                            <button type="button" onclick="checkbox('{{pro[0]}}')"
                                                class="btn btn-success">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                                                    fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                                    <path
                                                        d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
                                                </svg>
                                            </button>
                                            <button type="button" onclick="checkboxRestar('{{pro[0]}}')"
                                                class="btn btn-danger">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
                                                    fill="currentColor" class="bi bi-dash" viewBox="0 0 16 16">
                                                    <path
                                                        d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8" />
                                                </svg>
                                            </button>
                                            {% elif pro[8] == 0 %}
                                            <button type="button" style="width: 7rem;" disabled
                                                class="btn btn-secondary">
                                                Sin stock
                                            </button>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <hr>
                        <label style="font-size: larger;">Articulos seleccionados</label>
                        <hr>
                        <div class="table-responsive" style="height: 17rem;">
                            <table class="table" style="vertical-align: middle; width: 98%;;">
                                <thead>
                                    <tr>
                                        <th scope="col" style="text-align: center; width: 5%;">Codigo</th>
                                        <th scope="col" style="width: 50%;">Producto</th>
                                        <th scope="col" style="width: 15%;">Cantidad</th>
                                        <th scope="col" style="width: 15%;">Precio</th>
                                    </tr>
                                </thead>
                                <tbody id="articuloSeleccion">
                                    <tr>
                                        <td colspan="5">
                                            <div class="alert alert-primary" role="alert" style="text-align: center;">
                                                <strong>No hay articulos seleccionados</strong>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-4"
                        style="background-color: rgb(197, 197, 197); border-radius: 1rem; padding: 1rem;">
                        <label style="font-size: larger;">Detalles de la venta</label>
                        <hr>
                        <table style="font-size: 1.5rem; width: 95%; margin: auto;">
                            <tr>
                                <td>
                                    <small style="font-size: large;">Fecha de venta</small><br>
                                    {{fecha}}
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <small style="font-size: large;">Cajero que atiende</small><br>
                                    {{session["username"]}}
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <small style="font-size: large;">Cantidad de articulos</small><br>
                                    <label id="totalArticulos">0</label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <hr>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: right;">
                                    <div
                                        style="border: 2px solid black; border-radius: 1rem; padding: 1rem;bottom: 0rem;">
                                        <small style="font-size: larger;">Total de la venta</small><br>
                                        <label id="totalVenta">$&nbsp;0</label>
                                    </div>
                                </td>
                            </tr>
                            <tr id="botonVenta" hidden="true">
                                <td style="text-align: center;">
                                    <hr>
                                    <button type="button" class="btn btn-primary" style="width: 100%;"
                                        onclick="enviarJSON()"> Cerrar Venta </button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Regresar</button>
            </div>
        </div>
    </div>
</div>

<div style="width: 100rem; margin: auto; height: auto; margin-top: 2rem;">
    <table style="width: 100%;">
        <tr>
            <td colspan="6">
                Menu
            </td>
        </tr>
        <tr>
            <td class="casilla" onclick="menu(1)">
                <h4>&nbsp;Ventas</h4>
            </td>
            <td class="casilla" onclick="menu(2)">
                <h4>&nbsp;Productos</h4>
            </td>
            {% if session['tipoUsuario'] == "Administrador" %}
            <td class="casilla" onclick="menu(3)">
                <h4>&nbsp;Proveedores</h4>
            </td>
            <td class="casilla" onclick="menu(4)">
                <h4>&nbsp;Impuestos</h4>
            </td>
            <td class="casilla" onclick="menu(5)">
                <h4>&nbsp;Usuarios</h4>
            </td>
            {% endif %}
            <td hidden="true" style="text-align: center;">
                <table style="margin: auto; width: 90%;">
                    <tr>
                        <td><input type="text" class="form-control" name="" id="" aria-describedby="helpId"
                                placeholder="Busca lo que sea..." /></td>
                        <td><button type="submit" class="btn btn-primary"
                                style="background-image: url('/img/lupa.png'); background-repeat: no-repeat; background-size: cover; width: 2.5rem; height: 2.5rem;"></button>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan="6">
                <hr>
            </td>
        </tr>
    </table>
</div>
<div class="box1">
    <div
        style="width: 20rem;background-color: #f04f4f; border-radius: 1rem; padding: 1rem; color: white; text-align: left; margin: 1rem;">
        <h3>Herramientas</h3>
        <div class="table-responsive">
            <table style="width: 100%; vertical-align: middle;">
                <tr>
                    <td>
                        <hr>
                        <small>Operaciones</small>
                    </td>
                </tr>
                <tr>
                    <td class="herramientas" data-bs-toggle="modal" data-bs-target="#modalVenta">
                        &nbsp;- Crear venta
                    </td>
                </tr>
                <tr>
                    <td>
                        <hr>
                        <small>Almacén</small>
                    </td>
                </tr>
                <tr>
                    <td class="herramientas" data-bs-toggle="modal" data-bs-target="#modalAlmEntrada">
                        &nbsp;- Entrada de mercancia
                    </td>
                </tr>
                <tr>
                    <td class="herramientas" data-bs-toggle="modal" data-bs-target="#modalAlmSalida">
                        &nbsp;- Salida de mercancia
                    </td>
                </tr>
                {% if session['tipoUsuario'] == "Administrador" %}
                <tr>
                    <td>
                        <hr>
                        <small>Modulos</small>
                    </td>
                </tr>
                <tr>
                    <td class="herramientas" data-bs-toggle="modal" data-bs-target="#modalAltaProducto">
                        &nbsp;- Alta de producto
                    </td>
                </tr>
                <tr>
                    <td class="herramientas" data-bs-toggle="modal" data-bs-target="#modalAltaProveedor">
                        &nbsp;- Alta de proveedor
                    </td>
                </tr>
                <tr>
                    <td class="herramientas" data-bs-toggle="modal" data-bs-target="#modalAltaImpuesto">
                        &nbsp;- Alta de Impuesto
                    </td>
                </tr>
                <tr>
                    <td class="herramientas" data-bs-toggle="modal" data-bs-target="#modalAltaUsuario">
                        &nbsp;- Alta de usuario
                    </td>
                </tr>
                {% endif %}
            </table>
            <hr>
        </div>
    </div>
    <div id="ventas" style="margin: 1rem;">
        <div style="width: 80rem;border: 1px solid grey; border-radius: 1rem; padding: 1rem;">
            <h3>Ventas</h3>
            <hr>
            {% set cont = namespace(a=0) %}
            {% for ven in ventas %}
            {% set cont.a = cont.a + 1 %}
            {% endfor %}
            {% if cont.a != 0 %}
            <div class="table-responsive" style="width: 100%;">
                <table class="table">
                    <thead>
                        <tr>
                            <th style="width: 2%;">No.</th>
                            <th style="width: 10%;">Fecha</th>
                            <th style="width: 13%;">Cajero</th>
                            <th style="width: 10%;">Sub Total</th>
                            <th style="width: 10%;">Impuesto</th>
                            <th style="width: 10%;">Total</th>
                            <th style="width: 40%;" id="encabezadoArtTabla" colspan="2">Articulos</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set cont = namespace(a=0) %}
                        {% for ven in ventas %}
                        {% set cont.a = cont.a + 1 %}
                        <tr>
                            <td>{{cont.a}}</td>
                            <td>{{ven[2]}}</td>
                            <td>{{ven[10]}}</td>
                            <td>$ {{ven[3]}}</td>
                            <td>$ {{ven[4]}}</td>
                            <td>$ {{ven[5]}}</td>
                            <td id="detalleArtTabla{{ven[0]}}" hidden="true">
                                <table style="width: 100%; vertical-align: middle;">
                                    {% set contArt = namespace(a=0) %}
                                    {% for venD in ventasDetalle %}
                                    {% if venD[0] == ven[0] %}
                                    {% set contArt.a = contArt.a + venD[9] %}
                                    <tr>
                                        <td style="width: 15%;">
                                            {{venD[8]}}
                                        </td>
                                        <td style="width: 40%;">
                                            {{venD[16]}}
                                        </td>
                                        <td style="width: 25%;">
                                            {{venD[9]}}
                                        </td>
                                        <td style="width: 20%;">
                                            $&nbsp;{{venD[11]}}
                                        </td>
                                    </tr>
                                    {% endif %}
                                    {% endfor %}
                                    <tr>
                                        <td colspan="2">
                                            <hr>
                                            Cantidad de articulos: {{contArt.a}}
                                        </td>
                                        <td colspan="2">
                                            <hr>
                                            Total de venta: $ {{ven[5]}}
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <button id="abrirDetalle{{ven[0]}}" onclick="detalleArticulo(1,'{{ven[0]}}')"
                                    type="button" class="btn btn-primary">
                                    Detalles
                                </button>
                                <button id="cerrarDetalle{{ven[0]}}" onclick="detalleArticulo(2,'{{ven[0]}}')"
                                    hidden="true" type="button" class="btn btn-secondary">
                                    Cerrar
                                </button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="alert alert-secondary" role="alert">
                <strong>No hay ventas registradas.</strong>
            </div>
            {% endif %}
        </div>
    </div>
    <div id="productos" hidden="true" style="margin: 1rem;">
        <div style="width: 80rem;border: 1px solid grey; border-radius: 1rem; padding: 1rem;">
            <h3>Productos</h3>
            <hr>
            {% set cont = namespace(a=0) %}
            {% for pro in productos %}
            {% set cont.a = cont.a + 1 %}
            {% endfor %}
            {% if cont.a != 0 %}
            <div class="table-responsive" style="width: 100%;">
                <table class="table" style="vertical-align: middle;">
                    <thead>
                        <tr>
                            <th style="width: 5%;">No.</th>
                            <th style="width: 50%;">Nombre</th>
                            <th style="width: 20%;">Precio Venta</th>
                            <th style="width: 20%;">Stock</th>
                            <th style="width: 5%; text-align: center;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for pro in productos %}
                        <tr {% if pro[8]==0 %} style="background-color: rgb(204, 202, 202);" {% endif %}>
                            <td>{{pro[0]}}</td>
                            <td>{{pro[4]}}</td>
                            <td>$&nbsp;{{pro[6]}}</td>
                            <td>
                                {% if pro[8] == 0 %}
                                <h5>Sin stock</h5>
                                {% else %}
                                {{pro[8]}}&nbsp;{{pro[7]}}
                                {% endif %}
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                    data-bs-target="#modalDetalle{{pro[0]}}">
                                    Detalles
                                </button>
                                <!-- Modal Detalle Producto -->
                                <div class="modal fade" id="modalDetalle{{pro[0]}}" tabindex="-1"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Detalle del producto
                                                </h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <table style="width: 100%; margin: auto; vertical-align: middle;">
                                                    <tr>
                                                        <td>
                                                            <small>Nombre del producto</small>
                                                            <h4>{{pro[4]}}</h4>
                                                            <hr>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <small>Costo del producto</small>
                                                            <h4>$ {{pro[5]}}</h4>
                                                            <hr>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <small>Precio de venta</small>
                                                            <h4>$ {{pro[6]}}</h4>
                                                            <hr>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <small>Stock en inventario</small>
                                                            <h4>{{pro[8]}}&nbsp;{{pro[7]}}</h4>

                                                            <hr>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <small>Tipo de producto</small>
                                                            <h4>{{pro[10]}}</h4>

                                                            <hr>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <small>Tipo de impuesto aplicable</small>
                                                            <h4>{{pro[12]}} - %{{pro[13]}}</h4>

                                                            <hr>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <small>Proveedor del producto</small>
                                                            <h5>{{pro[16]}}</h5>
                                                            <h6>{{pro[19]}}</h6>
                                                            <hr>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-bs-dismiss="modal">Cerrar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="alert alert-secondary" role="alert">
                <strong>No hay productos registrados.</strong>
            </div>
            {% endif %}
        </div>
    </div>
    <div id="proveedores" hidden="true" style="margin: 1rem;">
        <div style="width: 80rem;border: 1px solid grey; border-radius: 1rem; padding: 1rem;">
            <h3>Proveedores</h3>
            <hr>
            {% set cont = namespace(a=0) %}
            {% for prov in proveedor %}
            {% set cont.a = cont.a + 1 %}
            {% endfor %}
            {% if cont.a != 0 %}
            <div class="table-responsive" style="width: 100%;">
                <table class="table" style="vertical-align: middle;">
                    <thead>
                        <tr>
                            <th style="width: 5%;">No.</th>
                            <th style="width: 50%;">Nombre</th>
                            <th style="width: 20%;">RFC</th>
                            <th style="width: 20%;">Telefono</th>
                            <th style="width: 20%;">Correo</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for prov in proveedor %}
                        <tr class="">
                            <td>{{prov[0]}}</td>
                            <td>{{prov[1]}}</td>
                            <td>{{prov[2]}}</td>
                            <td>{{prov[3]}}</td>
                            <td>
                                {{prov[4]}}<p></p>
                                {{prov[5]}}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="alert alert-secondary" role="alert">
                <strong>No hay proveedores registrados.</strong>
            </div>
            {% endif %}
        </div>
    </div>
    <div id="impuestos" hidden="true" style="margin: 1rem;">
        <div style="width: 80rem;border: 1px solid grey; border-radius: 1rem; padding: 1rem;">
            <h3>Impuestos</h3>
            <hr>
            {% set cont = namespace(a=0) %}
            {% for imp in impuestos %}
            {% set cont.a = cont.a + 1 %}
            {% endfor %}
            {% if cont.a != 0 %}
            <div class="table-responsive" style="width: 100%;">
                <table class="table" style="vertical-align: middle;">
                    <thead>
                        <tr>
                            <th style="width: 5%;">No.</th>
                            <th style="width: 50%;">Nombre</th>
                            <th style="width: 20%;">Porcentaje</th>
                            <th style="width: 20%;">Tipo de Impuesto</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for imp in impuestos %}
                        <tr class="">
                            <td>{{imp[0]}}</td>
                            <td>{{imp[1]}}</td>
                            <td>{{imp[2]}}&nbsp;%</td>
                            <td>{{imp[3]}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="alert alert-secondary" role="alert">
                <strong>No hay impuestos registrados.</strong>
            </div>
            {% endif %}
        </div>
    </div>
    <div id="usuarios" hidden="true" style="margin: 1rem;">
        <div style="width: 80rem;border: 1px solid grey; border-radius: 1rem; padding: 1rem;">
            <h3>Usuarios</h3>
            <hr>
            {% set cont = namespace(a=0) %}
            {% for usu in usuarios %}
            {% set cont.a = cont.a + 1 %}
            {% endfor %}
            {% if cont.a != 0 %}
            <div class="table-responsive" style="width: 100%;">
                <table class="table" style="vertical-align: middle;">
                    <thead>
                        <tr style="vertical-align: middle;">
                            <th style="width: 5%;">No.</th>
                            <th style="width: 20%;">Nombre Usuario</th>
                            <th style="width: 20%;">Nombre Completo</th>
                            <th style="width: 10%;">Telefono</th>
                            <th style="width: 10%;">Correo</th>
                            <th style="width: 20%;">Direccion</th>
                            <th style="width: 10%;">Fecha Nac.</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for usu in usuarios %}
                        <tr class="">
                            <td>{{usu[0]}}</td>
                            <td>{{usu[2]}}</td>
                            <td>{{usu[4]}}&nbsp;{{usu[5]}}&nbsp;{{usu[6]}}</td>
                            <td>{{usu[7]}}</td>
                            <td>{{usu[8]}}</td>
                            <td>{{usu[9]}}</td>
                            <td>{{usu[10]}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="alert alert-secondary" role="alert">
                <strong>No hay usuarios registrados.</strong>
            </div>
            {% endif %}
        </div>
    </div>
</div>
<script>
    document.addEventListener("keyup", e => {

        if (e.target.matches("#buscador")) {
            document.querySelectorAll(".articulo").forEach(fruta => {
                fruta.textContent.toLowerCase().includes(e.target.value.toLowerCase())
                    ? fruta.classList.remove("filtro")
                    : fruta.classList.add("filtro")
            })

        }

    })
</script>

{% include 'admin/footer.html' %}